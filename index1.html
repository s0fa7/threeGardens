<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta charset="utf-8" />
    <title>3 сада</title>
    <link rel="stylesheet" href="/src/assets/css/app.css" />
    <style>
        .fade-in {
            opacity: 0;
            transition: opacity 0.4s ease-in-out;
        }

        .fade-in.show {
            opacity: 1;
        }
    </style>
</head>

<body>
    <header class="header" id="mainHeader">
        <div class="header-content header-main-path" id="headerContent">
            <nav class="nav animation">
                <ul>
                    <li><a href="">Услуги</a></li>
                    <li><a href="">Прайс-лист</a></li>
                    <li><a href="">Проекты</a></li>
                    <li><a href="">О компании</a></li>
                    <li><a href="">Партнерам</a></li>
                    <li><a href="">Контакты</a></li>
                </ul>
            </nav>

            <a href="/" class="logo">
                <img src="/src/assets/icons/logoVector.svg" alt="Логотип сайта" />
            </a>

            <div class="info-nav animation">
                <a href="" class="plants-catalog">
                    <span>Каталог растений</span>
                    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" viewBox="0 0 20 20">
                        <use href="/src/assets/icons/sprite.svg#dots"></use>
                    </svg>
                </a>
                <button type="button" class="btn application-btn">
                    <span>Оставить заявку</span>
                    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" viewBox="0 0 20 20">
                        <use href="/src/assets/icons/sprite.svg#arrow-right"></use>
                    </svg>
                </button>
                <a href="tel:8800219333">8 800 219 333</a>
                </ul>
            </div>
        </div>
    </header>
    <section>
        <div class="main-section">
            <div class="main-section-title">
                <p class="animation delay1">Вместе мы воплотим вашу мечту в проект</p>
                <div class="animation">
                    <h2>
                        Делаем вашу жизнь комфортнее благодаря</h2>
                    <div class="white-bg-tag">озеленению</div>
                </div>

            </div>
            <div class="main-section-img animation">
                <img class="fade-in show" src="/src/assets/images/main/tree-main1.png" />
            </div>
            <div class="main-section-right-side">
                <div class="main-section-navigation">
                    <div class="main-section-navigation-container animation">
                        <svg xmlns="http://www.w3.org/2000/svg"
                            class="main-section-navigation-icon hidden-navigation-decorative" aria-hidden="true"
                            viewBox="0 0 14 14">
                            <use href="/src/assets/icons/sprite.svg#sheet"></use>
                        </svg>
                        <div class="main-section-navigation__element hidden-navigation-decorative">
                            <div class="main-section-navigation__element-title">
                                <h4>01 сад юности</h4>
                                <img class="hidden" src="/src/assets/icons/arrow-right.svg" alt="стрелка " />
                            </div>
                            <div class="hidden">
                                <p>идеальный сад начинается с идеи</p>
                                <div class="main-section-navigation__element-img-container">
                                    <img src="/src/assets/images/main/photo-1.png" alt="сад-1" />
                                    <img src="/src/assets/images/main/photo-2.png" alt="сад-2" />
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="main-section-navigation-container animation delay1">
                        <svg xmlns="http://www.w3.org/2000/svg"
                            class="main-section-navigation-icon hidden-navigation-decorative" aria-hidden="true"
                            viewBox="0 0 18 20">
                            <use href="/src/assets/icons/sprite.svg#flower"></use>
                        </svg>
                        <div class="main-section-navigation__element hidden-navigation-decorative">
                            <div class="main-section-navigation__element-title">
                                <h4>02 Сад зрелости</h4>
                                <img class="hidden" src="/src/assets/icons/arrow-right.svg" alt="стрелка" />
                            </div>
                            <div class="hidden">
                                <p>Сад оживает благодаря нашему профессионализму и вниманию
                                    к каждой детали</p>
                                <div class="main-section-navigation__element-img-container">
                                    <img src="/src/assets/images/main/photo-3.png" alt="сад-3" />
                                    <img src="/src/assets/images/main/photo-4.png" alt="сад-4" />
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="main-section-navigation-container animation delay1">
                        <svg xmlns="http://www.w3.org/2000/svg"
                            class="main-section-navigation-icon hidden-navigation-decorative" aria-hidden="true"
                            viewBox="0 0 14 16">
                            <use href="/src/assets/icons/sprite.svg#tree"></use>
                        </svg>
                        <div class="main-section-navigation__element hidden-navigation-decorative">
                            <div class="main-section-navigation__element-title">
                                <h4>03 Сад мудрости</h4>
                                <img class="hidden" src="/src/assets/icons/arrow-right.svg" alt="стрелка" />
                            </div>
                            <div class="hidden">
                                <p>Сохраним красоту вашего
                                    сада на долгие годы</p>
                                <div class="main-section-navigation__element-img-container">
                                    <img src="/src/assets/images/main/photo-5.png" alt="сад-5" />
                                    <img src="/src/assets/images/main/photo-6.png" alt="сад-6" />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="button-container white-btn-bg">
                    <span>подробнее</span>
                    <img src="/src/assets/icons/arrow-right.svg" alt="стрелка оставить заявку" />
                </div>
            </div>
        </div>
    </section>
    <script>
        window.onload = (event) => {

            const containers = document.querySelectorAll('.main-section-navigation-container');
            const mainImg = document.querySelector('.main-section-img img');

            let activeContainer = containers[0]; // по умолчанию выбран первый
            let previousState = new Map();

            const imageMap = {
                0: '/src/assets/images/main/tree-main1.png',
                1: '/src/assets/images/main/tree-main2.png',
                2: '/src/assets/images/main/tree-main3.png'
            };

            // Сохраняем изначальные классы всех элементов
            containers.forEach((container, index) => {
                const togglableElements = container.querySelectorAll('.hidden, .hidden-navigation-decorative');
                togglableElements.forEach(el => {
                    previousState.set(el, {
                        hasHidden: el.classList.contains('hidden'),
                        hasDecorative: el.classList.contains('hidden-navigation-decorative')
                    });
                });
            });

            // Сразу убираем классы у первого элемента
            if (activeContainer) {
                removeClasses(activeContainer);
                changeMainImage(imageMap[0]);
            }

            // Назначаем обработчики
            containers.forEach((container, index) => {
                container.addEventListener('click', () => {
                    if (activeContainer && activeContainer !== container) {
                        restoreClasses(activeContainer);
                    }

                    if (activeContainer !== container) {
                        removeClasses(container);
                        activeContainer = container;
                        changeMainImage(imageMap[index]);
                    } else {
                        // Повторный клик — свернуть
                        restoreClasses(container);
                        activeContainer = null;
                        changeMainImage(imageMap[0]); // вернём первую картинку
                    }
                });
            });

            function removeClasses(container) {
                const elements = container.querySelectorAll('.hidden, .hidden-navigation-decorative');
                elements.forEach(el => {
                    el.classList.remove('hidden');
                    el.classList.remove('hidden-navigation-decorative');

                    // 👇 Добавляем анимацию
                    el.classList.add('animated-fade-in');

                    // Удалим анимационный класс после завершения (если нужно перезапускать анимацию позже)
                    el.addEventListener('animationend', () => {
                        el.classList.remove('animated-fade-in');
                    }, { once: true });
                });
            }


            function restoreClasses(container) {
                const elements = container.querySelectorAll('*');
                elements.forEach(el => {
                    const state = previousState.get(el);
                    if (state) {
                        if (state.hasHidden) el.classList.add('hidden');
                        else el.classList.remove('hidden');

                        if (state.hasDecorative) el.classList.add('hidden-navigation-decorative');
                        else el.classList.remove('hidden-navigation-decorative');
                    }
                });
            }

            function changeMainImage(newSrc) {
                if (!mainImg) return;

                // Удалим анимацию, чтобы можно было перезапустить
                mainImg.classList.remove('animate-in');

                // Маленькая задержка — иначе анимация не перезапустится
                setTimeout(() => {
                    mainImg.src = newSrc;

                    // Перезапускаем анимацию
                    mainImg.classList.add('animate-in');
                }, 50);
            }
        }
    </script>


</body>

</html>